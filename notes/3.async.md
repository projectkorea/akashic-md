# async, await

- **Promise Chaining**ì„ **ê°„íŽ¸**í•˜ê³  **ë™ê¸°ì ì¸**ì½”ë“œ ì¸ê²ƒ ì²˜ëŸ¼, ìž‘ì„±í•  ìˆ˜ ìžˆë„ë¡ ë„ì™€ì¤€ë‹¤.
- `syntatic sugar` : íŽ¸ë¦¬í•œ ì‚¬ìš©ì„ ìœ„í•œ ê·¸ëŸ´ì‹¸í•œ ë¬¸ë²•

## 1. async

- í•¨ìˆ˜ ì•žì— `async` í‚¤ì›Œë“œë¥¼ ë¶™ì´ë©´, **promiseë¥¼ ë°˜í™˜**í•œë‹¤.
- `async` í•¨ìˆ˜ ì•ˆì—ì„œ ì—ëŸ¬ê°€ ë‚˜ì§€ ì•ŠëŠ”ë‹¤ë©´ **ì„±ê³µ(ì´í–‰)ëœ ìƒíƒœ**ë¡œ ë‚˜ì˜¨ë‹¤.
- ì˜¤ëž˜ ê±¸ë¦¬ëŠ” ì¼ì€ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìžˆê²Œ ë°”ê¿”ì¤€ë‹¤.

```js
async function fetchUser() {
    // do network request in 10secs
    return 'junha';     // resolveí•¨ìˆ˜ì— ì¸ìžë¡œ ë“¤ì–´ê°€ëŠ” ê°’ì„ returní•´ì£¼ëŠ” ê²ƒê³¼ ê°™ìŒ
}
const user = fetchUser();
console.log(user);
```

## 2. await

- `await` í‚¤ì›Œë“œëŠ” `async function` ì•ˆì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.
- `await` í‚¤ì›Œë“œëŠ” `Promise`ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.
- `await` í‚¤ì›Œë“œëŠ” **`resolve()`í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê¸° ì „ê¹Œì§€**, `async` í•¨ìˆ˜ ë‚´ì˜ ë‹¤ìŒ ì½”ë“œë¡œ ë„˜ì–´ê°€ì§€ ëª»í•˜ê²Œí•œë‹¤. 
  - ì´ì™€ ê°™ì€ íŠ¹ì§•ì´ `await í‚¤ì›Œë“œë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ì— ìˆœì„œë¥¼ ë¶€ì—¬í•œë‹¤`ê³  í•  ìˆ˜ ìžˆë‹¤.
- `await` í‚¤ì›Œë“œê°€ ë¶™ì€ í•¨ìˆ˜ì˜ ë¦¬í„´ ê°’ì€, í”„ë¡œë¯¸ìŠ¤ê°€ ì•„ë‹ˆë¼ **ì´í–‰ëœ í”„ë¡œë¯¸ìŠ¤ì˜ ê°’**ì´ë‹¤.

**ì˜ˆì‹œ) async/awaitì„ ì“°ì§€ ì•Šê³  promise thenë§Œ ì“°ëŠ” ê²½ìš°**

```js
function delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
}

function getApple() {
    return delay(2000).then(() => 'ðŸŽ');
}

function getBanana() {
    return delay(1000).then(() => 'ðŸŒ');
}

function pickFruits() {
    return getApple().then((apple) => {
        return getBanana().then((banana) => `${apple} + ${banana}`);
    }); // this is hard to read
}

pickFruits().then(console.log);
```

**ì˜ˆì‹œ) async/awaitì„ ì‚¬ìš©í•˜ì—¬ ë™ê¸°ì ìœ¼ë¡œ í‘œí˜„í•œ ê²½ìš°**

```js
async function pickFruits() {
    const apple = await getApple(); // 2ì´ˆ ì†Œëª¨
    const banana = await getBanana(); // 1ì´ˆ ì†Œëª¨
    return `${apple}+${banana}`; // ì´ 3ì´ˆ ì†Œëª¨
}

pickFruits().then(console.log);
```

-   promiseë³´ë‹¤ ê°„ê²°í•˜ê³  ì§ê´€ì ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìžˆë‹¤.

```js
async function effPickFruits() {
    const applePromise = getApple(); // execute immediately
    const bananaPromise = getBanana(); // execute immediately
    const apple = await applePromise; // 2ì´ˆ ì´í•˜ ì†Œëª¨
    const banana = await bananaPromise; 
    // applePromiseë¥¼ ê¸°ë‹¤ë¦´ ë•Œ ì´ë¯¸ ë¦¬í„´ ë˜ì–´ìžˆê¸° ë•Œë¬¸ì— ë°”ë¡œ ë„˜ì–´ê°„ë‹¤.
    return `${apple}+${banana}`; // ì´ 2ì´ˆ ì†Œëª¨
}
effPickFruits().then(console.log);
```

## 3. promise ì½”ë“œ => async/aswait ì½”ë“œ

```js
// Before
function displayUser(){
    fetchUser()
    .then((user)=>{
        fetchProfile(user)//
        .then((profile))=>{
            updateUI(user,profile)
        }
    })
}
```

```js
// After
async function displayUser() {
    const user = await fetchUser();
    const profile = await fetchProfile(user);
    updateUI(user, profile);
}
```