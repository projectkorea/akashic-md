# async await

-   Promise Chainingì„ ê°„í¸í•˜ê²Œ, ë™ê¸°ì‹ìœ¼ë¡œ, ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.
-   It's easy, clear style of using promise
    -   It's `syntatic sugar` : í¸ë¦¬í•œ ì‚¬ìš©ì„ ìœ„í•œ ê·¸ëŸ´ì‹¸í•œ ë¬¸ë²•

## 1. async

-   ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì¼ì€ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë°”ê¿”ì¤€ë‹¤.
-   **í•¨ìˆ˜ ì•ì— async í‚¤ì›Œë“œ**ë¥¼ ë¶™ì´ë©´, í•¨ìˆ˜ ì•ˆì— ìˆëŠ” **ì½”ë“œ ë¸”ëŸ­ë“¤ì´ promiseë¡œ ë°”ë€ë‹¤.**

```js
async function fetchUser() {
    // do network request in 10secs
    return 'junha';
}
const user = fetchUser();
console.log(user);
```

## 2. await

**ì˜ˆì‹œ) async/awaitì„ ì“°ì§€ ì•Šê³  promise thenë§Œ ì“°ëŠ” ê²½ìš°**

```js
function delay(ms) {
    return new Promise((resolve) => setTimeout(resolve, ms));
}

function getApple() {
    return delay(2000).then(() => 'ğŸ');
}

function getBanana() {
    return delay(1000).then(() => 'ğŸŒ');
}

function pickFruits() {
    return getApple().then((apple) => {
        return getBanana().then((banana) => `${apple} + ${banana}`);
    });
}

pickFruits().then(console.log);
//pickFruits().then((value)=> console.log(value);
```

**ì˜ˆì‹œ) async/awaitì„ ì‚¬ìš©í•˜ì—¬ ë™ê¸°ì ìœ¼ë¡œ í‘œí˜„í•œ ê²½ìš°**

```js
async function pickFruits() {
    const apple = await getApple(); // 2ì´ˆ ì†Œëª¨
    const banana = await getBanana(); // 1ì´ˆ ì†Œëª¨
    return `${apple}+${banana}`; // ì´ 3ì´ˆ ì†Œëª¨
}

pickFruits().then(console.log);
```

-   promiseë³´ë‹¤ ê°„ê²°í•˜ê³  ì§ê´€ì ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

```js
async function effPickFruits() {
    const applePromise = getApple(); // execute immediately
    const bananaPromise = getBanana(); // execute immediately
    const apple = await applePromise; // ìœ„ì—ì„œ ë¶€í„° ì‹¤í–‰ë˜ì—ˆê¸° ë•Œë¬¸ì— 2ì´ˆ ì´í•˜ ì†Œëª¨
    const banana = await bananaPromise; // applePromiseë¥¼ ê¸°ë‹¤ë¦´ ë•Œ ì´ë¯¸ ë¦¬í„´ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ë°”ë¡œ ë„˜ì–´ê°
    return `${apple}+${banana}`; // ì´ 2ì´ˆ ì†Œëª¨
}
effPickFruits().then(console.log);
```

-   í”„ë¡œë¯¸ìŠ¤ë¥¼ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²½ìš°, `Promise.all()`ì„ ì‚¬ìš©í•˜ì

## 3. useful promise

-   promise ë°°ì—´ì„ ì „ë‹¬í•˜ê²Œ ë˜ë©´, ëª¨ë“  promiseë“¤ì´ ë³‘ë ¬ì ìœ¼ë¡œ ë°›ì•„ì¤„ ë•Œ ê¹Œì§€ ë°›ì•„ì¤€ë‹¤.

```js
function pickAllFruites() {
    return Promise.all([getApple(), getBanana()]).then((fruits) =>
        fruits.join('+')
    );
}
pickAllFruits().then(console.log);
```

```js
function pickOnlyOne() {
    return Promise.race([getApple(), getBanana()]);
}
pickOnlyOne().then(console.log);
```

-   `Promise.race()`: ë°°ì—´ì—ì„œ ê°€ì¥ ë¨¼ì € returní•˜ëŠ” ê°’ìœ¼ë¡œ ì „ë‹¬í•œë‹¤.
